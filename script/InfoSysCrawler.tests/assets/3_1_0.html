<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html[]><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Script-Type" content="text/javascript" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /><meta name="baseid" content="42594315" /><meta name="releaseid" content="72057594080522251" /><meta name="topicid" content="42594315" /><link rel="stylesheet" href="../../../assets/css/base/01-bootstrap.min.css" /><link rel="stylesheet" href="../../../assets/css/base/02-jquery-tree.css" /><link rel="stylesheet" href="../../../assets/css/base/03-bootstrap-schema.css" /><link rel="stylesheet" href="../../../assets/css/base/04-jquery.mcustomscrollbar.min.css" /><link rel="stylesheet" href="../../../assets/css/base/05-jquery.mmenu.oncanvas.css" /><link rel="stylesheet" href="../../../assets/css/base/06-jquery.mmenu.schema.css" /><link rel="stylesheet" href="../../../assets/css/formats.css" /><title>FB_ReadCouplerDiag</title><meta http-equiv="content-type" content="text/html; charset=utf-8" /><meta http-equiv="Content-Language" content="en" /><meta name="date" content="637489440000000000" /><meta name="generator" content="onlineInfoSysConverter" /><meta name="Robots" content="index, follow" /><script src="../../../includes/styles.js" type="text/javascript" language="JavaScript"></script><script src="../../../includes/prettify/prettify.js" type="text/javascript" language="JavaScript"></script><script src="../../../includes/prettify/lang-st.js" type="text/javascript" language="JavaScript"></script><link rel="stylesheet" type="text/css" href="../../../css/prettify/prettify.css" /><meta name="parent" content="42589835" /><meta name="level" content="7" /><meta name="product" content="PLC" /><meta name="category" content="TE1000 XAE" /><meta name="productgroup" content="TwinCAT 3" /><meta name="microsoft_help" content="FB_ReadCouplerDiag" /><meta name="primaryid" content="3826489383443943666" /></head><body id="42594315" lang="en-US" data-node-id="42594315" class="" data-culture="en-US" onload="prettyPrint()"><div class="no-off-canvas"><div id="pushobj"><div class="scroll-container content-container" id="content-container"><div class="container" role="main"><ol class="breadcrumb " style="display:none;"><li><a href="index.html">TwinCAT 3 PLC Lib: Tc2_Coupler</a></li><li><a href="42589835.html">Function blocks</a></li><li>FB_ReadCouplerDiag</li></ol><h1 class="heading" style="color:black;">FB_ReadCouplerDiag</h1><p><img style="vertical-align: baseline;" src="Images/gif/9007199297376907__Web.gif" alt="FB_ReadCouplerDiag 1:" /> </p><p>The FB_ReadCouplerDiag function block allows reading of the first and second flashing sequences of the error LED on the coupler when a terminal bus or coupler error occurs. The data is transferred to the PLC via the 2-byte PLC interface. This, however, only functions if communication over the fieldbus is maintained. It must be possible for the data to be transferred without error from the coupler to the PLC via the fieldbus. In order to detect that a coupler error has occurred, the status byte for the coupler in the PLC can be interrogated cyclically, and the function block activated when an error occurs.</p><div class="textmodule" id="42675339"><h2 class="subheading">VAR_INPUT</h2><pre class="prettyprint lang-st">VAR_INPUT<br />    stState    : PLCINTFSTRUCT;<br />    bExecute   : BOOL;<br />    tTimeout   : TIME;<br />END_VAR</pre><p><strong>stState</strong> : Status word of the 2-byte PLC interface. (<a href="42603275.html">PLCINTFSTRUCT</a>)</p><p><strong>bExecute</strong>: The function block is activated by a positive edge at this input.</p><p><strong>tTimeout</strong>: States the length of the timeout that may not be exceeded during execution of the function.</p></div><div class="textmodule" id="42676875"><h2 class="subheading">VAR_OUTPUT</h2><pre class="prettyprint lang-st">VAR_OUTPUT<br />    stCtrl   : PLCINTFSTRUCT;<br />    bBusy    : BOOL;<br />    bError   : BOOL;<br />    nErrId   : UDINT;<br />    stDiag   : ST_CouplerDiag;<br />END_VAR</pre><p><strong>stCtrl</strong> : Control word of the 2-byte PLC interface. (<a href="42603275.html">PLCINTFSTRUCT</a>)</p><p><strong>bBusy</strong>: This output is set when the block is activated, and remains set until execution of the function has been completed.</p><p><strong>bError</strong>: If an error should occur during the execution of the function, then this output is set, after the bBusy output has been reset.</p><p><strong>nErrId</strong> : Supplies the error number when the bError output is set.</p><table class="table tabletype-header table-fixed"><colgroup><col style="width: 16.0%;"></col><col style="width: 83.9%;"></col></colgroup><thead><tr><th><p class="text-left">Error number</p></th><th><p class="text-left">Error description</p></th></tr></thead><tbody><tr><td><p class="text-left">0</p>
</td><td><p class="text-left">No error</p>
</td></tr><tr><td><p class="text-left">0x100</p>
</td><td><p class="text-left">Error at initialisation of the communication via the 2 byte PLC interface</p>
</td></tr><tr><td><p class="text-left">0x200</p>
</td><td><p class="text-left">Error during communication</p>
</td></tr><tr><td><p class="text-left">0x300</p>
</td><td><p class="text-left">Timeout-Error. The permitted execution time was exceeded</p>
</td></tr><tr><td><p class="text-left">0x400</p>
</td><td><p class="text-left">Wrong parameter value at register number</p>
</td></tr><tr><td><p class="text-left">0x500</p>
</td><td><p class="text-left">Wrong parameter value at table number</p>
</td></tr></tbody></table><p> </p><p><strong>stDiag</strong> : Structure containing the coupler's diagnostic information (error type, and the first and second coupler flashing sequences). (<a href="42606347.html">ST_CouplerDiag</a>)</p></div><div class="textmodule" id="42667147"><h2 class="subheading">Requirements</h2><table class="table tabletype-header table-fixed"><colgroup><col style="width: 33.3%;"></col><col style="width: 33.3%;"></col><col style="width: 33.3%;"></col></colgroup><thead><tr><th>
<p class="text-left">Development environment</p></th><th>
<p class="text-left">Target system type</p></th><th>
<p class="text-left">PLC libraries to include (category group)</p></th></tr></thead><tbody><tr><td>
<p class="text-left">TwinCAT v3.1.0</p>
</td><td>
<p class="text-left">PC or CX (x86, x64, ARM)</p>
</td><td>
<p class="text-left">Tc2_Coupler (IO)</p>
</td></tr></tbody></table></div></div><div class="container"><footer><p class="text-muted">© 2021 Beckhoff Automation</p></footer></div></div><div class="beckhoff-runninghead" id="navbar" role="navigation"><a class="beckhoff-runninghead-brand" href="index.html">TwinCAT 3 | PLC Library: Tc2_Coupler</a></div></div></div><script src="../../../assets/js/00-jquery.min.js"></script><script src="../../../assets/js/05-jquery.mcustomscrollbar.min.js"></script><script src="../../../assets/js/06-jquery-scrollbars.min.js"></script><script src="../../../assets/js/jquery.mousewheel.min.js"></script></body></html>