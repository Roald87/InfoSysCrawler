<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html[]><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Script-Type" content="text/javascript" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="baseid" content="8730119179" /><meta name="releaseid" content="8730119179" /><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /><link layout-comment="Pfad-Trafo: concat('../', $source)" rel="stylesheet" href="../../../assets/css/base/01-bootstrap.min.css" /><link layout-comment="Pfad-TRAfo: ctrl:If(@class='MultiLangRoot', $source, concat('../', $source))" rel="stylesheet" href="../../../assets/css/formats.css" /><link layout-comment="Pfad-Trafo: ctrl:If(@class='MultiLangRoot', $source, concat('../', $source))" rel="stylesheet" href="../../../assets/css/formats.css" /><link layout-comment="Pfad-Trfo: ctrl:If(@class='MultiLangRoot', $source, concat('../', $source))" rel="stylesheet" href="../../../assets/css/formats.css" /><title>FB_KinPresetRotation</title><meta http-equiv="content-type" content="text/html; charset=utf-8" /><meta http-equiv="Content-Language" content="en" /><meta name="date" content="637756416000000000" /><meta name="generator" content="onlineInfoSysConverter" /><meta name="Robots" content="index, follow" /><script src="../../../includes/styles.js" type="text/javascript" language="JavaScript"></script><script src="../../../includes/prettify/prettify.js" type="text/javascript" language="JavaScript"></script><script src="../../../includes/prettify/lang-st.js" type="text/javascript" language="JavaScript"></script><link rel="stylesheet" type="text/css" href="../../../css/prettify/prettify.css" /><meta name="parent" content="1955651339" /><meta name="level" content="7" /><meta name="description" content="The function block FB_KinPresetRotation sets the rotational state..." /><meta name="product" content="TF5xxx - Motion" /><meta name="category" content="TFxxxx | TwinCAT 3 Functions" /><meta name="productgroup" content="TwinCAT 3" /><meta name="microsoft_help" content="FB_KinPresetRotation" /><meta name="topicid" content="8730119179" /><meta name="primaryid" content="7827489821954626661" /></head><body id="8730119179" lang="en-US" data-node-id="8730119179" class="" data-culture="en-US" onload="prettyPrint()"><header class="d-print-none"><ol class="breadcrumb "><li><a href="index.html">TF511x | TwinCAT 3 Kinematic Transformation</a></li><li></li><li></li></ol></header><article role="main" aria-labelledby="heading-8730119179"><h1 class="heading" style="color:black;">FB_KinPresetRotation</h1><div class="metalist"></div><figure class="img_original"><img src="Images/png/8729717515__Web.png" width="465" height="90" alt="FB_KinPresetRotation 1:" /></figure><p>The function block FB_KinPresetRotation sets the rotational state.</p><p>The rotational state is not persistent and must be reset after a TwinCAT restart or if a path is started after an ACS axis movement (direct mode).</p><div class="textmodule" id="9057601931"><table class="infobox"><tbody><tr><td class="col-safety-pictogram info-symbol"><img src="safety/notice_bk_infosymbol.png" alt="FB_KinPresetRotation 2:" /></td><td class="info-content"><p class="safety-cause">Extended rotation range</p><ul class="safety-conditions"><li>For a unique solution the standard rotation range is limited to: </li></ul><ol><li class="safety-instruction">Rotation1: -180 to 180 degrees,</li><li class="safety-instruction">Rotation2: -90 to 90 degrees,</li><li class="safety-instruction">Rotation3: -180 to 180 degrees.</li></ol><ul class="safety-results"><li>In some 6-axis applications it is desirable to be able to rotate beyond this rotation range.<br />The function blocks FB_KinExtendedRotationRange and FB_KinPresetRotation enable the rotational state to be extended, saved and restored beyond the default values. </li></ul></td></tr></tbody></table></div><h2 class="subheading">VAR_INPUT</h2><pre class="prettyprint lang-st">VAR_INPUT<br />    bExecute       : BOOL;<br />    oidTrafo       : UDINT;<br />    stRotation     : ARRAY[1..3] OF LREAL;<br />END_VAR</pre><p><strong>bExecute:</strong> The command is executed with a rising edge.</p><p><strong>oidTrafo:</strong> Object ID (OTCID) of the kinematic transformation object.</p><p><strong>stRotation: </strong>Presetting of MCS Rotation1, Rotation2 and Rotation3</p><div class="textmodule" id="2247329931"><div class="metalist"></div><h2 class="subheading">VAR_OUTPUT</h2><pre class="prettyprint lang-st">VAR_OUTPUT<br />    bBusy                 : BOOL;<br />    bDone                 : BOOL;<br />    bError                : BOOL;<br />    nErrorId              : UDINT;<br />END_VAR</pre><div class="textmodule" id="2247341323"><p>
          <strong>bBusy: </strong>The output becomes TRUE when the command is started with <em>bExecute</em> and remains TRUE as long as the function block executes the command. While <em>bBusy</em> is TRUE, no new command is accepted at the inputs. If <em>bBusy </em>becomes FALSE again, the function block is ready for a new command. At the same time one of the outputs <em>bDone </em>or <em>bError </em>is set.</p><p>
          <strong>bDone: </strong>The output becomes TRUE when the command was executed successfully.</p><p>
          <strong>bError: </strong>The output <em>bError</em> is set to TRUE, if an error occurred during the command execution.</p><p>
          <strong>nErrorId: </strong>contains the command-specific error code of the most recently executed command. Details of the error code can be found in the ADS error documentation or in the NC error documentation (error codes from 0x4000).</p><div class="linklist"></div></div><div class="linklist"></div><div class="linklist"><a href="8730119179.html#2247341323"></a></div></div><p><strong>Example: Equivalent rotations (same tool orientation)<br /></strong></p><p>Rotation1:=   -180              Rotation1:=   -180</p><p>Rotation2:=    45                Rotation2:=     45</p><p>Rotation3:=    157.95         Rotation3:=   -202.05</p><p><em>FB_KinPresetRotation</em> must be used before <em>FB_KinConfigGroup</em> or <em>FB_KinCalcTrafo </em>perform the forward transformation.</p><table class="infobox"><tbody><tr><td class="col-safety-pictogram info-symbol"><img src="safety/notice_bk_infosymbol.png" alt="FB_KinPresetRotation 3:" /></td><td class="info-content"><p class="safety-consequence">To use the extended rotation range with <em>FB_KinCalcTrafo(bForward:=TRUE) </em>without a kinematic group, the meta information uMetaInfo.aData[4] := 1 must be set.</p></td></tr></tbody></table><div class="textmodule" id="9057618187"><h2 class="subheading">Requirements</h2><table class="table tabletype-header table-fixed"><colgroup><col style="width: 33.3%;"></col><col style="width: 33.3%;"></col><col style="width: 33.3%;"></col></colgroup><thead><tr><th><p>Development environment</p></th><th><p>Target platform</p></th><th><p>PLC libraries to include</p></th></tr></thead><tbody><tr><td><p>TwinCAT V3.1.4024.7</p>
<p>Advanced Motion Pack V3.1.10.1</p>
</td><td><p>PC or CX (x86 or x64)</p>
</td><td><p>Tc2_KinematicTransformation (V3.2.7.3 or later)</p>
</td></tr></tbody></table></div><div class="p"></div></article><footer><p class="text-muted">© 2021 Beckhoff Automation</p></footer><script src="../../../../assets/js/00-jquery.min.js"></script><script src="../../../../assets/js/01-bootstrap.min.js"></script></body></html>