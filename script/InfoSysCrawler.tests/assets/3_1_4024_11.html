<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html[]><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Script-Type" content="text/javascript" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="baseid" content="8235976331" /><meta name="releaseid" content="9007207490717323" /><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /><link layout-comment="Pfad-Trafo: concat('../', $source)" rel="stylesheet" href="../../../assets/css/base/01-bootstrap.min.css" /><link layout-comment="Pfad-TRAfo: ctrl:If(@class='MultiLangRoot', $source, concat('../', $source))" rel="stylesheet" href="../../../assets/css/formats.css" /><link layout-comment="Pfad-Trafo: ctrl:If(@class='MultiLangRoot', $source, concat('../', $source))" rel="stylesheet" href="../../../assets/css/formats.css" /><link layout-comment="Pfad-Trfo: ctrl:If(@class='MultiLangRoot', $source, concat('../', $source))" rel="stylesheet" href="../../../assets/css/formats.css" /><title>FindAndSplit</title><meta http-equiv="content-type" content="text/html; charset=utf-8" /><meta http-equiv="Content-Language" content="en" /><meta name="date" content="637750368000000000" /><meta name="generator" content="onlineInfoSysConverter" /><meta name="Robots" content="index, follow" /><script src="../../../includes/styles.js" type="text/javascript" language="JavaScript"></script><script src="../../../includes/prettify/prettify.js" type="text/javascript" language="JavaScript"></script><script src="../../../includes/prettify/lang-st.js" type="text/javascript" language="JavaScript"></script><link rel="stylesheet" type="text/css" href="../../../css/prettify/prettify.css" /><meta name="parent" content="3482944011" /><meta name="level" content="8" /><meta name="description" content="The function splits a string into two strings..." /><meta name="product" content="PLC" /><meta name="category" content="TE1000 XAE" /><meta name="productgroup" content="TwinCAT 3" /><meta name="microsoft_help" content="FindAndSplit" /><meta name="topicid" content="8235976331" /><meta name="primaryid" content="3438267492659948266" /></head><body id="8235976331" lang="en-US" data-node-id="8235976331" class="" data-culture="en-US" onload="prettyPrint()"><header class="d-print-none"><ol class="breadcrumb "><li><a href="index.html">TwinCAT 3 | PLC Library: Tc2_Utilities</a></li><li></li><li></li></ol></header><article role="main" aria-labelledby="heading-8235976331"><h1 class="heading" style="color:black;">FindAndSplit</h1><div class="metalist"></div><figure class="img_original"><img src="Images/png/8245772683__Web.png" width="417" height="129" alt="FindAndSplit 1:" /></figure><p>The function splits a string into two strings. </p><p>The character string is searched for a separator (e.g. "\") from left to right. The strings on both sides of this first occurrence of the separator are output.</p><p>The search direction can be changed with the parameter bSearchFromRight so that the string is searched from right to left.</p><p>The function stops the checking of the input length after 10000 characters (<code>Parameterlist.cMaxCharacters</code>) in order to avoid an infinite loop.</p><h2 class="subheading">FUNCTION FindAndSplit : BOOL</h2><p>The return value is TRUE if the separator was found and the division and output of the strings was successful.</p><div class="textmodule" id="8235988235"><div class="metalist"></div><h2 class="subheading">VAR_INPUT</h2><pre class="prettyprint lang-st">VAR_INPUT<br />    pSeparator        : POINTER TO STRING;<br />    pSrcString        : POINTER TO STRING;<br />    pLeftString       : POINTER TO STRING;<br />    nLeftSize         : UDINT;<br />    pRightString      : POINTER TO STRING;<br />    nRightSize        : UDINT;<br />    bSearchFromRight  : BOOL;<br />END_VAR</pre><p><strong>pSeparator: </strong>Pointer to the STRING variable that represents the separator.</p><p><strong>pSrcString: </strong>Pointer to the STRING variable that represents the source string.</p><p><strong>pLeftString: </strong>Pointer to the STRING variable to which the separated left-hand string is to be output.</p><p><strong>nLeftSize: </strong>Maximum size of the separated left string.</p><p><strong>pRightString: </strong>Pointer to the STRING variable to which the separated right-hand string is to be output.</p><p><strong>nRightSize: </strong>Maximum size of the separated right string.</p><p><strong>bSearchFromRight</strong>: If the input is set, the search direction changes so that the string is searched for the separator from right to left.</p><div class="p"></div></div><h2 class="subheading">Sample "Splitting into several substrings":</h2><p>This sample shows how to split a string ''machines/machine1/module2/data/tx' into several strings ['machines', 'machine1', 'module2', 'data', 'tx']. To this end the function FindAndSplit() is called repeatedly in a loop.</p><pre class="prettyprint lang-st">PROGRAM MAIN<br />VAR<br />    sSrc         : STRING(255) := 'machines/machine1/module2/data/tx';<br />    sSeparator   : STRING(1) := '/';<br />    aSplit       : ARRAY[1..cMax] OF STRING(255);<br />    bResultSplit : BOOL;<br />    i            : UDINT;<br />END_VAR<br />VAR CONSTANT<br />    cMax         : UDINT := 9;<br />END_VAR</pre><pre class="prettyprint lang-st">aSplit[1] := sSrc;<br />FOR i:=1 TO cMax-1 DO<br />    bResultSplit := FindAndSplit( pSeparator     := ADR(sSeparator),  pSrcString := ADR(aSplit[i]), <br />                                  pLeftString    := ADR(aSplit[i]),   nLeftSize  := SIZEOF(aSplit[i]), <br />                                  pRightString   := ADR(aSplit[i+1]), nRightSize := SIZEOF(aSplit[i+1]),<br />                                  bSearchFromRight := FALSE );<br />    IF NOT bResultSplit THEN<br />        EXIT;<br />    END_IF<br />END_FOR</pre><div class="p"></div><h2 class="subheading">Sample "Merging several strings":</h2><p>This sample shows how to combine several strings ['machines', 'machine1', 'module2', 'data', 'tx'] into one string 'machines/machine1/module2/data/tx'.</p><pre class="prettyprint lang-st">PROGRAM MAIN<br />VAR<br />    sSeparator    : STRING(1) := '/';<br />    aSplit        : ARRAY[1..cMax] OF STRING(255) := ['machines', 'machine1', 'module2', 'data', 'tx'];<br />    sJoined       : STRING(255);<br />    bResultConcat : BOOL;<br />    i             : UDINT;<br />END_VAR<br />VAR CONSTANT<br />    cMax          : UDINT := 5;<br />END_VAR</pre><pre class="prettyprint lang-st">sJoined := aSplit[1];<br />FOR i:=1 TO cMax-1 DO<br />    bResultConcat := CONCAT2(pSrcString1 := ADR(sJoined), pSrcString2 := ADR(sSeparator), pDstString := ADR(sJoined), nDstSize := SIZEOF(sJoined));<br />    IF NOT bResultConcat THEN<br />        EXIT;<br />    END_IF<br />    bResultConcat := CONCAT2(pSrcString1 := ADR(sJoined), pSrcString2 := ADR(aSplit[i+1]), pDstString := ADR(sJoined), nDstSize := SIZEOF(sJoined));<br />    IF NOT bResultConcat THEN<br />        EXIT;<br />    END_IF<br />END_FOR</pre><div class="p"></div><div class="textmodule" id="8723513995"><h2 class="subheading">Requirements</h2><table class="table tabletype-header table-fixed"><colgroup><col style="width: 33.3%;"></col><col style="width: 33.3%;"></col><col style="width: 33.3%;"></col></colgroup><thead><tr><th><p>Development environment</p></th><th><p>Target platform</p></th><th><p>PLC libraries to be integrated (category group)</p></th></tr></thead><tbody><tr><td><p>TwinCAT v3.1.4024.11</p>
</td><td><p>PC or CX (x86, x64, ARM)</p>
</td><td><p>Tc2_Utilities (System) &gt;=3.3.39.0</p>
</td></tr></tbody></table></div></article><footer><p class="text-muted">© 2021 Beckhoff Automation</p></footer><script src="../../../../assets/js/00-jquery.min.js"></script><script src="../../../../assets/js/01-bootstrap.min.js"></script></body></html>